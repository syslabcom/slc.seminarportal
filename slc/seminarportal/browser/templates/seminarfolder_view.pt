<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<head>
    <metal:block metal:fill-slot="head_slot">
        <link rel="alternate" title="RSS 1.0" type="application/rss+xml"
            tal:condition="request/SearchableText|nothing"
            tal:attributes="href string:$here_url/search_rss?${request/QUERY_STRING}"/>
    </metal:block>

    <metal:javascriptslot fill-slot="javascript_head_slot">
        <script type="text/javascript" src="render_date_widget.js"></script>
        <!-- ECMAScript calendar -->
        <style type="text/css" media="all"
            tal:content="string:@import url($portal_url/jscalendar/calendar-blue.css);"></style>
        <script type="text/javascript"
            tal:attributes="src string:$portal_url/jscalendar/calendar_stripped.js"></script>
        <script type="text/javascript" charset="iso-8859-1"
            tal:condition="exists: portal/jscalendar/calendar-en.js"
            tal:attributes="src string:$portal_url/jscalendar/calendar-en.js"></script>
        <script>
            var jq = jQuery.noConflict();
            jq(document).ready(function(){
                jq("div.big-target a").bigTarget({
                    clickZone : 'div:eq(0)' // jQuery parent selector
                });
            });
        </script>
    </metal:javascriptslot>

    <metal:fill fill-slot="header">
        <div metal:use-macro="here/document_actions/macros/document_actions">
            Document actions (print, sendto etc)
        </div>
        <h1>
        <tal:block replace="structure python:getattr(here, here.getIcon(1))"/>
            <span tal:replace="here/Title"/>
        </h1>
    </metal:fill>
</head>

<body>
<div metal:fill-slot="main">
    <br clear="all"/>
    <tal:def define="template_id string:seminarfolder-view;
                     livesearch_enabled python:False;">
        <metal:macro use-macro="here/@@seminar-search/macros/search"/>
    </tal:def>
    <div id="SeminarFolder"
              tal:define="Batch python:modules['Products.CMFPlone'].Batch;
                          b_size python:3;
                          b_start request/b_start | b_start | python:0;
                          batch python:Batch(view.get_seminars(), b_size, int(b_start), orphan=2);">
        <!-- Navigation -->
        <br clear="all"/>
        <div metal:use-macro="here/batch_macros/macros/navigation" />
        <div class="big-target" 
             tal:repeat="seminar batch">
            <tal:schema define="obj seminar/getObject;
                                schema obj/Schema">
            <a tal:attributes="href string:${here_url}/${obj/id}"
               style="text-decoration: None">
            <h2 class="headline">
                <tal:block replace="structure python:getattr(obj, obj.getIcon(1))"/>
                <span tal:replace="obj/Title"/>
            </h2>
            </a>
            <div style="float:left; padding:1em;">
                <img tal:attributes="src string:${obj/get_path}/logo"/>
            </div>
            <div style="padding:1em" tal:content="obj/Description"/>
            <div style="padding:1em">
            <br clear="all"/>
            <tal:inner_loop repeat="fn python:['startDate', 'endDate', 
                                               'location', 'contactName', 'contactEmail',
                                               'contactPhone', 'eventUrl', 'eventType', 'attendees']">
            <tal:if define="field python:obj.schema[fn]"
                    condition="python:obj[field.accessor]()">
                <div class="spfield">
                    <label class="eventbox-label" tal:content="field/widget/label">Start Date</label>
                    <div class="eventbox-value-left-align">
                        <metal:field use-macro="python:obj.widget(field.getName(), mode='view')">
                            start date 
                        </metal:field>
                    </div>
                </div>
                <div class="visualClear"></div>	
                <br/>
            </tal:if>
            </tal:inner_loop>
            </div>
            </tal:schema>
        </div>
        <!-- Navigation -->
        <div metal:use-macro="here/batch_macros/macros/navigation" /> 
        <div tal:condition="python:not batch">
            No seminars matching your criteria were found
        </div>
    </div>
</div>
</body>
</html>

